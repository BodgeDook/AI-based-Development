# CV-1-36: Инверсия маски

## Описание:

Этот скрипт выполняет выделение зелёных объектов (в нашем случае, зелёных яблок) на изображении и создаёт маску, которая закрывает их, оставляя фон нетронутым. Программа предназначена для демонстрации обработки изображений с помощью OpenCV и методов сегментации по цвету.

## Входные данные:

- `unmasked_green_object.jpg` — исходное изображение зелёного яблока.  
  (В скрипте используется это синтетическое изображение.)

## Выходные данные:

- `masked_green_object.png` — результат работы программы: исходное изображение с применённой маской, где зелёные яблоки удалены/закрыты.

## Использование:

Для запуска программы выполните команду со следующими аргументами:

```bash
python make_object_mask.py --input_image input.jpg --output_image output.png
```

Вы можете также выполнить запуск с минимальным набором (результат будет сохранён в файл output.png):

```bash
python make_object_mask.py --input_image input.jpg
```

Если что-то непонятно, вы также имеете возможность узнать про аргументы функции через команду:

```bash
python make_object_mask.py --help
```

## Как это работает:

Программа выполняет следующие шаги:

1. **Загрузка изображения и преобразование в HSV**  
   Загружается исходное изображение и преобразуется из цветового пространства BGR в HSV для удобной работы с цветами.

2. **Определение диапазонов зелёного**  
   Определяются диапазоны светло-зелёного и тёмно-зелёного цветов, чтобы захватить все оттенки зелёного на яблоке.

3. **Создание и объединение масок**  
   Для каждого диапазона создаются отдельные маски, которые затем объединяются в одну общую маску.

4. **Морфологическая обработка**  
   Применяется закрытие и дилатация, чтобы удалить шумы и заполнить небольшие пустоты в маске.

5. **Заполнение контуров**  
   Контуры маски заполняются, чтобы яблоко было полностью закрыто белым цветом.

6. **Инвертирование маски и наложение на изображение**  
   Маска инвертируется и накладывается на исходное изображение, оставляя фон нетронутым.

7. **Сохранение результата**  
   Полученное изображение сохраняется в файл `green_apple_mask.png`.

## Требования

Для работы скрипта необходимы следующие компоненты:

- **Python 3.x** — интерпретатор Python версии 3 и выше.  
- **OpenCV (`opencv-python`)** — библиотека для обработки изображений.  
- **NumPy** — библиотека для работы с массивами и математическими операциями.  

Установить зависимости можно командой:

```bash
pip install opencv-python numpy
```

Либо из файла requirements.txt с конкретными версиями библиотек:

```bash
pip install -r requirements.txt
```
